#!/usr/bin/env python
# -*- coding: utf-8 -*-

from tkinter import ttk
import tkinter as tk
import sqlite3 as sql
import sys

def Pressed():
    Lookup()
    entry = pEntry.get()
    print(entry)
    #tree.insert(, "end", entry, text=entry, values=("3A","3B"))

def Lookup():
    print('looking up database')
    con = None

    try:
        con = sql.connect('proj.db')
        
        cur = con.cursor()
        cur.execute("SELECT * FROM Player")

        rows = cur.fetchall()

        for row in rows:
            tree.insert('', 0, text = row, values = ('1A', '1b'))
        
    except sql.Error as e:
        
        print("Error %s:" % e.args[0])
        sys.exit(1)
        
    finally:
        
        if con:
            con.close()


top = tk.Tk()

psearchFrame = tk.Frame(top)
psearchFrame.pack(side = tk.TOP)
lowerFrame = tk.Frame(top)
lowerFrame.pack(side = tk.BOTTOM)

pButton = tk.Button(psearchFrame, text = 'Search', command = Pressed)
pButton.pack(side = tk.LEFT, pady = 20, padx = 20)

pLabel = tk.Label(psearchFrame, text="Player")
pLabel.pack( side = tk.LEFT)
pEntry = tk.Entry(psearchFrame, bd =5)
pEntry.pack(side = tk.RIGHT)

tree = ttk.Treeview(top)

tree['columns'] = ("one", "two")
tree.column('one', width = 100)
tree.column('two', width = 100)
tree.heading('one', text = 'column A')
tree.heading('two', text = 'column B')

#tree.insert('', 0, text = 'Line 1', values = ('1A', '1b'))

#id2 = tree.insert('', 1, 'dir2', text = 'Dir 2')
#tree.insert(id2, "end", "dir 2", text="sub dir 2", values=("2A","2B"))

#tree.insert(id2, "end", "dir 3", text="sub dir 3", values=("3A","3B"))

tree.pack()

top.mainloop()
